<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Login Form Tutorial</title>
		<style></style>
	</head>
	<body onload="server()">
		<div class="testCollection">
			<h1>Test Collection</h1>
		</div>
    <form id="formElem" onsubmit="onsubmitFunc(event)">
      <input type="text" name="labId" value="2222">
      <input type="text" name="password" value="456">
      <input type="submit">
  </form>
    </body>
    <div id="displayResults"></div>
    <script>

      async function onsubmitFunc(e) {
        e.preventDefault();
        var form = document.querySelector("#formElem");
          //data stored for account
          data = {
            employeeId : form.querySelector('input[name="labId"]').value,
            testBarcode : form.querySelector('input[name="password"]').value,
          }
  
          let response = await fetch('addTestCollection', {
                  method: 'POST', // or 'PUT'
                  headers: {
                      'Content-Type': 'application/json',
                  },
                  body: JSON.stringify(data),
          })
  
          let text = await response.text(); // read response body as text
          document.getElementById('displayResults').innerHTML = text;
          return false;
      }


    function server() {
      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          document.getElementById("displayResults").innerHTML =
            this.responseText;
        }
      };
      xhttp.open("GET", "http://localhost:3000/getData");
      xhttp.send();
    }

    //   function onloadpage() {
    //     let response = await fetch('getData', {
    //               method: 'GET', // or 'PUT'
    //       })
    //     let text = await response.text();
    //     document.getElementById('displayResults').innerHTML = text;
		// }
  </script>
</html>